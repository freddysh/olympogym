{"version":3,"sources":["myjava.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myjava.js","sourcesContent":["\r\nfunction cambiar_estado(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_usuario', {id: id,estado:estado}, function(markup) {\r\n        if(estado==1){\r\n            $('#usuario_'+id).html('<a href=\"\" onclick=\"cambiar_estado('+id+',0)\"><i class=\"fa fa-fw fa-power-off text-green\"></i></a>');\r\n        }\r\n        else{\r\n            $('#usuario_'+id).html('<a href=\"\" onclick=\"cambiar_estado('+id+',1)\"><i class=\"fa fa-fw fa-power-off text-red\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n\r\n    });\r\n}\r\n\r\nfunction cambiar_estado_cli(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_cliente', {id: id,estado:estado}, function(markup) {\r\n        if(estado==1){\r\n            $('#cliente_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',0)\"><i class=\"fa fa-fw fa-power-off text-green\"></i></a>');\r\n        }\r\n        else{\r\n            $('#cliente_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',1)\"><i class=\"fa fa-fw fa-power-off text-red\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n        console.log(markup);\r\n    });\r\n}\r\nfunction guardar_asistencia(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/asistencia', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\nfunction cambiar_estado_pro(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_promocion', {id: id,estado:estado}, function(markup) {\r\n        var rpt=markup.split('_');\r\n        if(estado==1){\r\n            $('#promocion_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',0)\"><i class=\"fa fa-fw fa-power-off text-green\"></i></a>');\r\n        }\r\n        else{\r\n            $('#promocion_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',1)\"><i class=\"fa fa-fw fa-power-off text-red\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n\r\n    });\r\n}\r\nfunction Buscar_cliente(){\r\n    var dni=$(\"#dni\").val();\r\n    if(dni.length>0){\r\n        $('#datos_cliente').html('');\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.post('/buscar_cliente', {dni: dni}, function(markup) {\r\n            $('#datos_cliente').html(markup);\r\n        }).fail(function (markup) {\r\n            $('#datos_cliente').html('');\r\n        });\r\n    }\r\n}\r\n\r\nfunction escojer_promo(){\r\n    var promo=$('#promocion').val().split('_');\r\n    $('#total').val(promo[1]);\r\n}\r\nfunction escojer_fecha(){\r\n    var promo=$('#promocion').val().split('_');\r\n    var fecha=$('#fechaInicio').val();\r\n    fecha=new Date(fecha);\r\n    var dia=fecha.getDate()+1;\r\n    var mes=fecha.getMonth()+1;\r\n    var anio=fecha.getFullYear();\r\n    console.log('fecha inicio:'+anio+'-'+mes+'-'+dia);\r\n\r\n    if(promo[3]=='Dias') {\r\n        dia=fecha.getDate()+1;\r\n        console.log('dias'+promo[2]);\r\n    }\r\n    if(promo[3]=='Meses') {\r\n        mes=fecha.getMonth()+1;\r\n        console.log('Meses'+promo[2]);\r\n    }\r\n    if(promo[3]=='Anios') {\r\n        anio=fecha.getFullYear()+1;\r\n        console.log('Anios'+promo[2]);\r\n    }\r\n    console.log('fecha fin:'+anio+'-'+mes+'-'+dia);\r\n    $('#fechafin').val(anio+'-'+mes+'-'+dia);\r\n}\r\nfunction Generar_cuota(){\r\n    var cuotas=$(\"#cuotas\").val();\r\n    console.log('cuotas'+cuotas);\r\n\r\n    if(cuotas>0){\r\n        $('#lista_cuotas').html('');\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.post('/generar_cuotas', {cuotas: cuotas}, function(markup) {\r\n            $('#lista_cuotas').html(markup);\r\n        }).fail(function (markup) {\r\n            $('#lista_cuotas').html('');\r\n        });\r\n    }\r\n}\r\nfunction pagar_cuota(cuota){\r\n    if($(\"#estado_\"+cuota).val()==0){\r\n        $(\"#estado_\"+cuota).val(1);\r\n        $(\"#pagar_\"+cuota).removeClass('btn-primary');\r\n        $(\"#pagar_\"+cuota).addClass('btn-success');\r\n        $(\"#pagar_\"+cuota).html('Pagado');\r\n    }\r\n    else if($(\"#estado_\"+cuota).val()==1){\r\n        $(\"#estado_\"+cuota).val(0);\r\n        $(\"#pagar_\"+cuota).removeClass('btn-success');\r\n        $(\"#pagar_\"+cuota).addClass('btn-primary');\r\n        $(\"#pagar_\"+cuota).html('Pagar ahora');\r\n    }\r\n}\r\nfunction Envia_membresia(){\r\n        var estado= '';\r\n        jQuery(\"input[name='estado']\").each(function(){\r\n            estado+= $(this).val() + '[]';\r\n        });\r\n        estado=estado.substring(0, estado.length-2);\r\n        var cuota_fecha= '';\r\n        jQuery(\"input[name='cuota_fecha']\").each(function(){\r\n            cuota_fecha+= $(this).val() + '[]';\r\n        });\r\n        cuota_fecha=cuota_fecha.substring(0, cuota_fecha.length-2);\r\n        var cuota_precio= '';\r\n        jQuery(\"input[name='cuota_precio']\").each(function(){\r\n            cuota_precio+= $(this).val() + '[]';\r\n        });\r\n    cuota_precio=cuota_precio.substring(0, cuota_precio.length-2);\r\n\r\n        console.log('estado:'+estado);\r\n        console.log('cuota_fecha:'+cuota_fecha);\r\n        console.log('cuota_precio:'+cuota_precio);\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/nueva_membresia',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: $('#Membresia').serialize()+'&&estado='+estado+'&&cuota_fecha='+cuota_fecha+'&&cuota_precio='+cuota_precio,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                data=data.split('_');\r\n                // $('#lista_cuotas').html(data);\r\n                if(data[0]=='-1')\r\n                    $('#mensaje').html('<div class=\"alert alert-danger\" role=\"alert\"> <strong>Error!</strong> '+data[1]+'</div>');\r\n                else if(data[0]=='0')\r\n                    $('#mensaje').html('<div class=\"alert alert-warning\" role=\"alert\"> <strong>Advertencia!</strong> '+data[1]+'</div>');\r\n                else if(data[0]=='1')\r\n                    $('#mensaje').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> '+data[1]+'</div>');\r\n                $('#term').val();\r\n                $('#fechaInicio').val();\r\n                $('#fechafin').val();\r\n                $('#total').val();\r\n                $(\"#promocion option[value=\"+ 0 +\"]\").attr(\"selected\",true);\r\n                $('#lista_cuotas').html('');\r\n            }\r\n        });\r\n\r\n}"]}