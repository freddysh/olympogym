{"version":3,"sources":["myjava.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myjava.js","sourcesContent":["\r\nfunction cambiar_estado(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_usuario', {id: id,estado:estado}, function(markup) {\r\n        if(estado==1){\r\n            $('#usuario_'+id).html('<a class=\"btn btn-success\" href=\"\" onclick=\"cambiar_estado('+id+',0)\"><i class=\"fa fa-fw fa-power-off\"></i></a>');\r\n        }\r\n        else{\r\n            $('#usuario_'+id).html('<a class=\"btn btn-danger\" href=\"\" onclick=\"cambiar_estado('+id+',1)\"><i class=\"fa fa-fw fa-power-off\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n\r\n    });\r\n}\r\n\r\nfunction cambiar_estado_cli(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_cliente', {id: id,estado:estado}, function(markup) {\r\n        if(estado==1){\r\n            $('#cliente_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',0)\"><i class=\"fa fa-fw fa-power-off text-green\"></i></a>');\r\n        }\r\n        else{\r\n            $('#cliente_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',1)\"><i class=\"fa fa-fw fa-power-off text-red\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n        console.log(markup);\r\n    });\r\n}\r\nfunction guardar_asistencia(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/asistencia', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\nfunction buscar_membresia(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/buscar_cuotas', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\nfunction buscar_membresia_congelar(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/buscar_cuotas_congelar', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\n\r\nfunction cambiar_estado_pro(id,estado){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/cambiar_estado_promocion', {id: id,estado:estado}, function(markup) {\r\n        var rpt=markup.split('_');\r\n        if(estado==1){\r\n            $('#promocion_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',0)\"><i class=\"fa fa-fw fa-power-off text-green\"></i></a>');\r\n        }\r\n        else{\r\n            $('#promocion_'+id).html('<a href=\"\" onclick=\"cambiar_estado_cli('+id+',1)\"><i class=\"fa fa-fw fa-power-off text-red\"></i></a>');\r\n        }\r\n    }).fail(function (markup) {\r\n\r\n    });\r\n}\r\nfunction Buscar_cliente(){\r\n    var dni=$(\"#dni\").val();\r\n    if(dni.length>0){\r\n        $('#datos_cliente').html('');\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.post('/buscar_cliente', {dni: dni}, function(markup) {\r\n            $('#datos_cliente').html(markup);\r\n        }).fail(function (markup) {\r\n            $('#datos_cliente').html('');\r\n        });\r\n    }\r\n}\r\n\r\nfunction escojer_promo(){\r\n    var promo=$('#promocion').val().split('_');\r\n    $('#total').val(promo[1]);\r\n}\r\nfunction escojer_fecha(){\r\n    var promo=$('#promocion').val().split('_');\r\n    var fecha=$('#fechaInicio').val();\r\n    fecha=new Date(fecha);\r\n    var dia=fecha.getDate()+1;\r\n    var mes=fecha.getMonth()+1;\r\n    var anio=fecha.getFullYear();\r\n    console.log('fecha inicio:'+anio+'-'+mes+'-'+dia);\r\n\r\n    if(promo[3]=='Dias') {\r\n        dia=fecha.getDate()+1;\r\n        console.log('dias'+promo[2]);\r\n    }\r\n    if(promo[3]=='Meses') {\r\n        mes=fecha.getMonth()+1;\r\n        console.log('Meses'+promo[2]);\r\n    }\r\n    if(promo[3]=='Anios') {\r\n        anio=fecha.getFullYear()+1;\r\n        console.log('Anios'+promo[2]);\r\n    }\r\n    console.log('fecha fin:'+anio+'-'+mes+'-'+dia);\r\n    $('#fechafin').val(anio+'-'+mes+'-'+dia);\r\n}\r\nfunction Generar_cuota(){\r\n    var cuotas=$(\"#cuotas\").val();\r\n    console.log('cuotas'+cuotas);\r\n\r\n    if(cuotas>0){\r\n        $('#lista_cuotas').html('');\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.post('/generar_cuotas', {cuotas: cuotas}, function(markup) {\r\n            $('#lista_cuotas').html(markup);\r\n        }).fail(function (markup) {\r\n            $('#lista_cuotas').html('');\r\n        });\r\n    }\r\n}\r\nfunction pagar_cuota(cuota){\r\n    if($(\"#estado_\"+cuota).val()==0){\r\n        $(\"#estado_\"+cuota).val(1);\r\n        $(\"#pagar_\"+cuota).removeClass('btn-primary');\r\n        $(\"#pagar_\"+cuota).addClass('btn-success');\r\n        $(\"#pagar_\"+cuota).html('Pagado');\r\n    }\r\n    else if($(\"#estado_\"+cuota).val()==1){\r\n        $(\"#estado_\"+cuota).val(0);\r\n        $(\"#pagar_\"+cuota).removeClass('btn-success');\r\n        $(\"#pagar_\"+cuota).addClass('btn-primary');\r\n        $(\"#pagar_\"+cuota).html('Pagar ahora');\r\n    }\r\n}\r\nfunction Envia_membresia(){\r\n        var estado= '';\r\n        jQuery(\"input[name='estado']\").each(function(){\r\n            estado+= $(this).val() + '[]';\r\n        });\r\n        estado=estado.substring(0, estado.length-2);\r\n        var cuota_fecha= '';\r\n        jQuery(\"input[name='cuota_fecha']\").each(function(){\r\n            cuota_fecha+= $(this).val() + '[]';\r\n        });\r\n        cuota_fecha=cuota_fecha.substring(0, cuota_fecha.length-2);\r\n        var cuota_precio= '';\r\n        jQuery(\"input[name='cuota_precio']\").each(function(){\r\n            cuota_precio+= $(this).val() + '[]';\r\n        });\r\n    cuota_precio=cuota_precio.substring(0, cuota_precio.length-2);\r\n\r\n        console.log('estado:'+estado);\r\n        console.log('cuota_fecha:'+cuota_fecha);\r\n        console.log('cuota_precio:'+cuota_precio);\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/nueva_membresia',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: $('#Membresia').serialize()+'&&estado='+estado+'&&cuota_fecha='+cuota_fecha+'&&cuota_precio='+cuota_precio,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                data=data.split('_');\r\n                // $('#lista_cuotas').html(data);\r\n                if(data[0]=='-1')\r\n                    $('#mensaje').html('<div class=\"alert alert-danger\" role=\"alert\"> <strong>Error!</strong> '+data[1]+'</div>');\r\n                else if(data[0]=='0')\r\n                    $('#mensaje').html('<div class=\"alert alert-warning\" role=\"alert\"> <strong>Advertencia!</strong> '+data[1]+'</div>');\r\n                else if(data[0]=='1')\r\n                    $('#mensaje').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> '+data[1]+' <a href=\"rpt_membresia/'+data[2]+'\" class=\"text-white\"><i class=\"glyphicon glyphicon-print\"></i></a></div>');\r\n                $('#term').val();\r\n                $('#fechaInicio').val();\r\n                $('#fechafin').val();\r\n                $('#total').val();\r\n                $(\"#promocion option[value=\"+ 0 +\"]\").attr(\"selected\",true);\r\n                $('#lista_cuotas').html('');\r\n                // $(\"#imprimir\").attr(\"href\",\"{{route('rpt_membresia_path',\"+data[2]+\")}}\");\r\n            }\r\n        });\r\n\r\n}\r\nfunction Renovar_membresia(){\r\n    var estado= '';\r\n    jQuery(\"input[name='estado']\").each(function(){\r\n        estado+= $(this).val() + '[]';\r\n    });\r\n    estado=estado.substring(0, estado.length-2);\r\n    var cuota_fecha= '';\r\n    jQuery(\"input[name='cuota_fecha']\").each(function(){\r\n        cuota_fecha+= $(this).val() + '[]';\r\n    });\r\n    cuota_fecha=cuota_fecha.substring(0, cuota_fecha.length-2);\r\n    var cuota_precio= '';\r\n    jQuery(\"input[name='cuota_precio']\").each(function(){\r\n        cuota_precio+= $(this).val() + '[]';\r\n    });\r\n    cuota_precio=cuota_precio.substring(0, cuota_precio.length-2);\r\n\r\n    console.log('estado:'+estado);\r\n    console.log('cuota_fecha:'+cuota_fecha);\r\n    console.log('cuota_precio:'+cuota_precio);\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: '/renovar_membresia',\r\n        // data: $('#form_plan').serializeArray(),\r\n        data: $('#Membresia').serialize()+'&&estado='+estado+'&&cuota_fecha='+cuota_fecha+'&&cuota_precio='+cuota_precio,\r\n        // data:valor,\r\n        // Mostramos un mensaje con la respuesta de PHP\r\n        success: function(data){\r\n            data=data.split('_');\r\n            // $('#lista_cuotas').html(data);\r\n            if(data[0]=='-1')\r\n                $('#mensaje').html('<div class=\"alert alert-danger\" role=\"alert\"> <strong>Error!</strong> '+data[1]+'</div>');\r\n            else if(data[0]=='0')\r\n                $('#mensaje').html('<div class=\"alert alert-warning\" role=\"alert\"> <strong>Advertencia!</strong> '+data[1]+'</div>');\r\n            else if(data[0]=='1')\r\n                $('#mensaje').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> '+data[1]+' <a href=\"rpt_membresia/'+data[2]+'\" class=\"text-white\"><i class=\"glyphicon glyphicon-print\"></i></a></div>');\r\n            $('#term').val();\r\n            $('#fechaInicio').val();\r\n            $('#fechafin').val();\r\n            $('#total').val();\r\n            $(\"#promocion option[value=\"+ 0 +\"]\").attr(\"selected\",true);\r\n            $('#lista_cuotas').html('');\r\n            // $(\"#imprimir\").attr(\"href\",\"{{route('rpt_membresia_path',\"+data[2]+\")}}\");\r\n        }\r\n    });\r\n\r\n}\r\nvar nrocuotas=1;\r\nfunction agregar_cuota() {\r\n    nrocuotas=parseInt($('#cuotas').val());\r\n    nrocuotas++;\r\n    $('#cuotas').val(nrocuotas);\r\n    $('#lista_cuotas').append('' +\r\n        '<tr id=\"elemento_'+nrocuotas+'\">'+\r\n            '<td><input type=\"hidden\" id=\"id_'+nrocuotas+'\" value=\"0\"><input type=\"hidden\" name=\"estado\" id=\"estado_'+nrocuotas+'\" value=\"0\"><input type=\"date\" name=\"cuota_fecha\" id=\"cuota_fecha_'+nrocuotas+'\" value=\"'+Date(\"Y-m-d\")+'\" required></td>'+\r\n            '<td><input type=\"number\" name=\"cuota_precio\" id=\"cuota_precio_'+nrocuotas+'\"  required></td>'+\r\n            '<td><a id=\"pagar_'+nrocuotas+'\" type=\"button\" class=\"btn btn-primary\" onclick=\"pagar_cuota('+nrocuotas+')\">Pagar ahora</a></td>'+\r\n            '<td><a href=\"#!\" onclick=\"borrar_cuota('+nrocuotas+')\"><i class=\"text-red glyphicon glyphicon-trash fa-2x\"></i></a></td>'+\r\n        '</tr>');\r\n}\r\n\r\nfunction borrar_cuota(pos) {\r\n    // $('#elemento_'+pos).remove();\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas borrar esta cuota!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, borrar ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n        var id=$('#id_'+pos).val();\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/editar_membresia_borrar_cuota',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: '&&id='+id,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                if(data==1||data==2){\r\n                    $('#elemento_'+pos).remove();\r\n                }\r\n            }\r\n        });\r\n\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n\r\n}\r\nfunction editar_membresia(id){\r\n    var estado= '';\r\n    jQuery(\"input[name='estado']\").each(function(){\r\n        estado+= $(this).val() + '[]';\r\n    });\r\n    estado=estado.substring(0, estado.length-2);\r\n    var cuota_fecha= '';\r\n    jQuery(\"input[name='cuota_fecha']\").each(function(){\r\n        cuota_fecha+= $(this).val() + '[]';\r\n    });\r\n    cuota_fecha=cuota_fecha.substring(0, cuota_fecha.length-2);\r\n    var cuota_precio= '';\r\n    jQuery(\"input[name='cuota_precio']\").each(function(){\r\n        cuota_precio+= $(this).val() + '[]';\r\n    });\r\n    cuota_precio=cuota_precio.substring(0, cuota_precio.length-2);\r\n\r\n    console.log('estado:'+estado);\r\n    console.log('cuota_fecha:'+cuota_fecha);\r\n    console.log('cuota_precio:'+cuota_precio);\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: '/editar_membresia',\r\n        // data: $('#form_plan').serializeArray(),\r\n        data: $('#Membresia').serialize()+'&&estado='+estado+'&&cuota_fecha='+cuota_fecha+'&&cuota_precio='+cuota_precio+'&&id='+id,\r\n        // data:valor,\r\n        // Mostramos un mensaje con la respuesta de PHP\r\n        success: function(data){\r\n            data=data.split('_');\r\n            // $('#lista_cuotas').html(data);\r\n            if(data[0]=='-1')\r\n                $('#mensaje').html('<div class=\"alert alert-danger\" role=\"alert\"> <strong>Error!</strong> '+data[1]+'</div>');\r\n            else if(data[0]=='0')\r\n                $('#mensaje').html('<div class=\"alert alert-warning\" role=\"alert\"> <strong>Advertencia!</strong> '+data[1]+'</div>');\r\n            else if(data[0]=='1')\r\n                $('#mensaje').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> '+data[1]+'</div>');\r\n            // $('#term').val();\r\n            // $('#fechaInicio').val();\r\n            // $('#fechafin').val();\r\n            // $('#total').val();\r\n            // $(\"#promocion option[value=\"+ 0 +\"]\").attr(\"selected\",true);\r\n            // $('#lista_cuotas').html('');\r\n        }\r\n    });\r\n\r\n}\r\nfunction pagar_cuota_ahora(id) {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas pagar la cuota!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, pagar ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n        var estado=$(\"#estado_\"+id).val();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/pagar_cuota_ahora',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    $(\"#estado_\"+id).val(1);\r\n                    $(\"#pagar_\"+id).removeClass('btn-primary');\r\n                    $(\"#pagar_\"+id).addClass('btn-success');\r\n                    $(\"#pagar_\"+id).html('Pagado');\r\n                }\r\n                else{\r\n                    // $(\"#estado_\"+cuota).val(0);\r\n                    // $(\"#pagar_\"+id).removeClass('btn-success');\r\n                    // $(\"#pagar_\"+id).addClass('btn-primary');\r\n                    // $(\"#pagar_\"+id).html('Pagar ahora');\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\n\r\nfunction mostrar_asistencia(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/asistencia_clientes', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\n\r\n$(document).ready(function(){\r\n//cuando hagamos submit al formulario con id id_del_formulario\r\n//se procesara este script javascript\r\n    $(\"#frmbuscar\").submit(function(e){\r\n        e.preventDefault();\r\n        $('#desde1').val($('#desde').val());\r\n        $('#hasta1').val($('#hasta').val());\r\n\r\n        $.ajax({\r\n            url: $(this).attr(\"action\"),//action del formulario, ej:\r\n            //http://localhost/mi_proyecto/mi_controlador/mi_funcion\r\n            type: $(this).attr(\"method\"),//el método post o get del formulario\r\n            data: $(this).serialize(),//obtenemos todos los datos del formulario\r\n            error: function(){\r\n                //si hay un error mostramos un mensaje\r\n            },\r\n            success:function(data){\r\n                $('#lista_memnbresias').html(data);\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\nfunction calcular_fecha_venc(){\r\n    var promo=$('#promocion').val();\r\n    promo=promo.split('_');\r\n    var duracion=promo[2];\r\n    var periodo=promo[3];\r\n\r\n    var fecha_inicio=$('#fechaInicio').val();\r\n    var dato=fecha_inicio.split('-');\r\n    console.log('ini:'+fecha_inicio);\r\n    // var fecha2 = Date.parse(dato[2],dato[1]-1,dato[0]);\r\n    var fecha = new Date(dato[0],dato[1],dato[2]);\r\n\r\n    // var fecha = new Date(CDate);\r\n    var fecha0=fecha.getFullYear()+'-'+fecha.getMonth()+'-'+fecha.getDate();\r\n    console.log(fecha0);\r\n    if(periodo=='Dias') {\r\n        fecha.setDate(fecha.getDate()+parseInt(duracion));\r\n        console.log('sumar '+duracion+' dias');\r\n    }\r\n    if(periodo=='Meses') {\r\n        fecha.setMonth(fecha.getMonth()+parseInt(duracion));\r\n        console.log('sumar '+duracion+' meses');\r\n    }\r\n    if(periodo=='Anios') {\r\n        fecha.setFullYear(fecha.getFullYear()+parseInt(duracion));\r\n        console.log('sumar '+duracion+' años');\r\n    }\r\n    var mes=fecha.getMonth();\r\n    var dia=fecha.getDate();\r\n    mes = (mes < 10) ? (\"0\" + mes) : mes;\r\n    dia = (dia < 10) ? (\"0\" + dia) : dia;\r\n    var fecha1=fecha.getFullYear()+'-'+mes+'-'+dia;\r\n    $('#fechafin').val(fecha1);\r\n    console.log(fecha1);\r\n}\r\nfunction eliminar_promocion(id) {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas borrar la promocion!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, borra ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/borar_promocion',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    $(\"#promo_\"+id).fadeOut();\r\n                }\r\n                else if(data==2){\r\n                    swal(\r\n                        'Advertencia!',\r\n                        'Existen clientes asociados a la promocion, por favor solo cambie el \"estado\" a rojo.',\r\n                        'warning'\r\n                    )\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\nfunction eliminar_membresia(id) {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas borrar la membresia!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, borra ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/borar_membresia',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    $(\"#membre_\"+id).fadeOut();\r\n                }\r\n                else if(data==2){\r\n                    swal(\r\n                        'Advertencia!',\r\n                        'el cliente tiene asistencias, por favor solo cambie el \"estado\" a rojo.',\r\n                        'warning'\r\n                    )\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\nfunction congelar_membresia() {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas congelar la membresia!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, congelar ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n\r\n        var id=$('#id').val();\r\n        var desde=$('#desde').val();\r\n        var hasta=$('#hasta').val();\r\n\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/congelar_add',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id+'&&desde='+desde+'&&hasta='+hasta,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    swal(\r\n                        'Excente!',\r\n                        'La membresia fue congelada corectamente.',\r\n                        'success'\r\n                    )\r\n                    // $(\"#rpt_membresia\").html('<div class=\"alert alert-success\" role=\"success\"> <strong>Bien!</strong>La membresia fue congelada corectamente</div>');\r\n                }\r\n                else if(data==0){\r\n                    swal(\r\n                        'Advertencia!',\r\n                        'No se pudo congelar esta membresia.',\r\n                        'warning'\r\n                    )\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\nfunction descongelar(id) {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas descongelar la membresia!\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, congelar ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/congelar_delete',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    swal(\r\n                        'Excente!',\r\n                        'La membresia fue descongelada corectamente.',\r\n                        'success'\r\n                    )\r\n                    $('#Congelado_'+id).fadeOut();\r\n                    $('#Congelado_'+id).remove();\r\n                    \r\n                    // $(\"#rpt_membresia\").html('<div class=\"alert alert-success\" role=\"success\"> <strong>Bien!</strong>La membresia fue congelada corectamente</div>');\r\n                }\r\n                else if(data==0){\r\n                    swal(\r\n                        'Advertencia!',\r\n                        'No se pudo descongelar esta membresia.',\r\n                        'warning'\r\n                    )\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\nfunction buscar_membresia_ampliar(){\r\n    var dni=$(\"#term\").val();\r\n    console.log('dni:'+dni);\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    $.post('/buscar_membresia_ampliar', {dni: dni}, function(markup) {\r\n        $('#respusta').html(markup);\r\n        // var rpt=markup.split('_');\r\n        // if(rpt[0]==1){\r\n        //     var rpt1=markup.split('/');\r\n        //     var cuotas=rpt1[1];\r\n        //     var rpt1=rpt1[2].split('_');\r\n        //     var membresia='<p>el cliente esta asociado mediante la promocion '+rpt1[0]+' por un monto de '+rpt1[1]+' por '+rpt1[3]+' '+rpt1[1]+'</p>';\r\n        //     $('#respusta').html('' +\r\n        //         '<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> Se registro la asistencia del cliente con dni nro: '+dni+' <p>Cliente: '+rpt[1]+' '+rpt[2]+'</p><p>Fecha: '+rpt[3]+' '+rpt[4]+'</p></div>' +\r\n        //         membresia+\r\n        //         cuotas);\r\n        // }\r\n        // else if(rpt[0]==0){\r\n        //     $('#respusta').html('<div class=\"alert alert-success\" role=\"alert\"> <strong>Bien hecho!</strong> No existe el cliente con dni nro: '+dni+'</div>');\r\n        // }\r\n    }).fail(function (markup) {\r\n        $('#respusta').html(markup);\r\n    });\r\n}\r\nfunction ampliar_membresia() {\r\n    swal({\r\n        title: 'Estas seguro?',\r\n        text: \"Deseas ampliar la membresia!(esta operacion no se puede deshacer, ademas se descongelará esta cuenta en caso de estar congelada)\",\r\n        type: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, ampliar ahora!',\r\n        cancelButtonText: 'No, cancelar!',\r\n        confirmButtonClass: 'btn btn-success',\r\n        cancelButtonClass: 'btn btn-danger',\r\n        buttonsStyling: false\r\n    }).then(function () {\r\n\r\n        var id=$('#id').val();\r\n        var hasta=$('#hasta').val();\r\n\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n            }\r\n        });\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/ampliar_add',\r\n            // data: $('#form_plan').serializeArray(),\r\n            data: 'id='+id+'&&hasta='+hasta,\r\n            // data:valor,\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data){\r\n                // $(\"#estado_\"+cuota).val(0);\r\n                if(data==1){\r\n                    swal(\r\n                        'Excente!',\r\n                        'La membresia fue ampliada corectamente hasta la fecha '+hasta,\r\n                        'success'\r\n                    )\r\n                    $('#Membresia_hasta').html(hasta);\r\n                    \r\n                    // $(\"#rpt_membresia\").html('<div class=\"alert alert-success\" role=\"success\"> <strong>Bien!</strong>La membresia fue congelada corectamente</div>');\r\n                }\r\n                else if(data==0){\r\n                    swal(\r\n                        'Advertencia!',\r\n                        'No se pudo ampliar esta membresia.',\r\n                        'warning'\r\n                    )\r\n                }\r\n            }\r\n        });\r\n    }, function (dismiss) {\r\n        // dismiss can be 'cancel', 'overlay',\r\n        // 'close', and 'timer'\r\n        if (dismiss === 'cancel') {\r\n\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction editar_cliente_ajax(id){\r\n    $('#editar_cliente_ajax').submit(function() {\r\n        // Enviamos el formulario usando AJAX\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: $(this).attr('action'),\r\n            data: $(this).serialize(),\r\n            // Mostramos un mensaje con la respuesta de PHP\r\n            success: function(data) {\r\n                if(data==1){\r\n                    $('#dni_b').html($('#dni').val());\r\n                    $('#nombres_b').html($('#nombres').val()+', '+$('#apellidos').val());\r\n                    $('#telefono_b').html($('#telefono').val());\r\n                    $('#email_b').html($('#email').val());\r\n\r\n                    $('#result').removeClass('text-danger');\r\n                    $('#result').addClass('text-success');\r\n                    $('#result').html('Datos guardado Correctamente!');\r\n                }\r\n                else{\r\n                    $('#result').removeClass('text-success');\r\n                    $('#result').addClass('text-danger');\r\n                    $('#result').html('Error al guardar los datos, intentelo de nuevo');\r\n                }\r\n            }\r\n        })\r\n        return false;\r\n    });\r\n}\r\n"]}